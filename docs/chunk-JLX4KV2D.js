import{a as H,b as J,c as K,d as Q}from"./chunk-6EQM67HW.js";import{a as w,b as V,e as O,g as P,i as N,k as D,l as R,m as B,o as g,p as G,r as A,s as L,t as q,w as U,x as j,y as z}from"./chunk-LEAS6TVG.js";import{Da as o,Ea as e,Fa as f,Ja as _,L as c,La as s,Ma as p,Q as l,R as d,Va as x,Wa as i,a as v,ab as M,b as C,fa as F,ic as k,kc as y,na as b,pb as T,ra as h,rb as E,va as u,wb as S,yb as I}from"./chunk-ZZZY3ZVR.js";function X(r,n){if(r&1){let t=_();o(0,"form",7)(1,"mat-form-field",8)(2,"mat-label"),i(3,"Description"),e(),f(4,"input",9),e(),o(5,"mat-checkbox",10),i(6," Completed "),e(),o(7,"div",11)(8,"button",12),s("click",function(){l(t);let m=p();return d(m.navigateToSummary())}),i(9,"Cancel"),e(),o(10,"button",13),s("click",function(){l(t);let m=p();return d(m.updateTodo())}),i(11,"Save"),e()()()}if(r&2){let t=p();u("formGroup",t.todoForm)}}function Y(r,n){r&1&&f(0,"div",14)}var W=class r{todoForm;router=c(I);activatedRoute=c(S);todosService=c(w);currentTodo;ngOnInit(){this.getIdFromRoute()}getIdFromRoute(){this.activatedRoute.params.subscribe(({id:n})=>this.getTodoById(n))}getTodoById(n){if(n){this.todosService.getTodoById(n).subscribe({next:t=>{this.currentTodo=t,this.initForm()}});return}this.currentTodo={id:0,title:"",completed:!1},this.initForm()}initForm(){this.todoForm=new B({title:new g(this.currentTodo?.title,[N.required]),completed:new g(this.currentTodo?.completed)})}updateTodo(){this.todoForm.valid&&this.todosService.postTodoById(C(v({},this.currentTodo),{title:this.todoForm.controls.title.value,completed:this.todoForm.controls.completed.value})).subscribe({next:()=>{this.todoForm.markAsPristine(),this.navigateToSummary()}})}navigateToSummary(){this.router.navigateByUrl("/summary")}hasUnsavedChanges(){return this.todoForm.dirty}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["app-edit-form"]],decls:13,vars:2,consts:[["formLoading",""],[1,"edit-section"],["mat-button","",1,"edit-section__go-back",3,"click"],[1,"edit-section__go-back-label"],[1,"edit-section__title"],[1,"edit-section__description"],[3,"formGroup",4,"ngIf","ngIfElse"],[3,"formGroup"],["appearance","outline",1,"edit-section__field"],["matInput","","placeholder","Placeholder","formControlName","title"],["formControlName","completed",1,"edit-section__checkbox"],[1,"edit-section__btn-group"],["mat-stroked-button","",3,"click"],["mat-flat-button","",3,"click"],[1,"loading","form-loading"]],template:function(t,a){if(t&1){let m=_();o(0,"section",1)(1,"button",2),s("click",function(){return l(m),d(a.navigateToSummary())}),o(2,"mat-icon"),i(3,"chevron_left"),e(),o(4,"span",3),i(5," Volver al listado "),e()(),o(6,"h2",4),i(7,"Atenci\xF3n"),e(),o(8,"p",5),i(9," Si haces alg\xFAn cambio en el formulario e intentas devolverte a la secci\xF3n del listado, va aparecer una nueva modal para confirmar que deseas salir sin guardar los cambios. "),e(),h(10,X,12,1,"form",6)(11,Y,1,0,"ng-template",null,0,M),e()}if(t&2){let m=x(12);F(10),u("ngIf",a.todoForm)("ngIfElse",m)}},dependencies:[q,G,P,D,R,A,L,U,O,V,z,j,J,H,Q,K,y,k,E,T],styles:[".edit-section[_ngcontent-%COMP%]{width:100%;padding:80px 16px 20px;max-width:1000px;margin:auto}.edit-section[_ngcontent-%COMP%]   .edit-section__go-back[_ngcontent-%COMP%]   .edit-section__go-back-label[_ngcontent-%COMP%]{text-decoration:underline}.edit-section[_ngcontent-%COMP%]   .edit-section__title[_ngcontent-%COMP%]{font-size:3rem;margin-top:0}.edit-section[_ngcontent-%COMP%]   .edit-section__description[_ngcontent-%COMP%]{margin-bottom:40px}"]})};export{W as EditFormComponent};
