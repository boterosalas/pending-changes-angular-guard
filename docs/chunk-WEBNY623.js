import{b as P}from"./chunk-IQG6MAF2.js";import"./chunk-SLDD5UQD.js";import{a as W,b as X,c as Y,d as Z}from"./chunk-6EQM67HW.js";import{a as S,b as D,e as N,g as A,i as B,k as G,l as Q,m as q,o as C,p as L,r as U,s as j,t as z,w as H,x as J,y as K}from"./chunk-LEAS6TVG.js";import{Da as r,Ea as i,Fa as _,Ja as g,L as d,La as p,Ma as l,Q as c,Qa as F,R as s,Ra as T,Sa as w,Va as y,Wa as a,a as h,ab as M,b as x,fa as b,ic as R,kc as V,na as v,pb as E,ra as f,rb as I,va as u,wb as k,yb as O}from"./chunk-ZZZY3ZVR.js";var tt=["editTodoTemplate"];function et(o,e){if(o&1){let t=g();r(0,"form",7)(1,"mat-form-field",8)(2,"mat-label"),a(3,"Description"),i(),_(4,"input",9),i(),r(5,"mat-checkbox",10),a(6," Completed "),i(),r(7,"div",11)(8,"button",12),p("click",function(){c(t);let n=l(2);return s(n.closeModal())}),a(9,"Cancel"),i(),r(10,"button",13),p("click",function(){c(t);let n=l(2);return s(n.updateTodo())}),a(11,"Save"),i()()()}if(o&2){let t=l(2);u("formGroup",t.todoForm)}}function ot(o,e){o&1&&_(0,"div",14)}function it(o,e){if(o&1){let t=g();r(0,"div",2)(1,"mat-icon",3),p("click",function(){c(t);let n=l();return s(n.closeModal())}),a(2," close "),i(),r(3,"h2",4),a(4,"Atenci\xF3n"),i(),r(5,"p",5),a(6," Si haces alg\xFAn cambio en el formulario e intentas cerrar la modal, va aparecer una nueva modal para confirmar que deseas salir sin guardar los cambios. "),i(),f(7,et,12,1,"form",6)(8,ot,1,0,"ng-template",null,1,M),i()}if(o&2){let t=y(9),m=l();b(7),u("ngIf",m.todoForm)("ngIfElse",t)}}var $=class o{editTodoTemplate;todoForm;formMatDialog=d(P);router=d(O);activatedRoute=d(k);todosService=d(S);currentTodo;dialogRef;ngOnInit(){this.getIdFromRoute()}getIdFromRoute(){this.activatedRoute.params.subscribe(({id:e})=>this.getTodoById(e))}getTodoById(e){if(e){this.todosService.getTodoById(e).subscribe({next:t=>{this.currentTodo=t,this.initForm()}});return}this.currentTodo={id:0,title:"",completed:!1},this.initForm()}initForm(){this.todoForm=new q({title:new C(this.currentTodo?.title,[B.required]),completed:new C(this.currentTodo?.completed)})}ngAfterViewInit(){this.dialogRef=this.formMatDialog.open(this.editTodoTemplate,{disableClose:!0,panelClass:"edit-modal"}),this.dialogRef.backdropClick().subscribe(()=>this.closeModal()),this.dialogRef.keydownEvents().subscribe(e=>{e.key==="Escape"&&this.closeModal()})}closeModal(){this.router.navigateByUrl("/summary")}updateTodo(){this.todoForm.valid&&this.todosService.postTodoById(x(h({},this.currentTodo),{title:this.todoForm.controls.title.value,completed:this.todoForm.controls.completed.value})).subscribe({next:()=>{this.todoForm.markAsPristine(),this.closeModal()}})}hasUnsavedChanges(){return this.todoForm.dirty}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=v({type:o,selectors:[["app-edit-form-modal"]],viewQuery:function(t,m){if(t&1&&F(tt,5),t&2){let n;T(n=w())&&(m.editTodoTemplate=n.first)}},decls:2,vars:0,consts:[["editTodoTemplate",""],["formLoading",""],[1,"edit-modal"],[1,"close-modal",3,"click"],[1,"edit-modal__title"],[1,"edit-modal__description"],[3,"formGroup",4,"ngIf","ngIfElse"],[3,"formGroup"],["appearance","outline",1,"edit-modal__field"],["matInput","","placeholder","Placeholder","formControlName","title"],["formControlName","completed",1,"edit-modal__checkbox"],[1,"edit-modal__btn-group"],["mat-stroked-button","",3,"click"],["mat-flat-button","",3,"click"],[1,"loading","form-loading"]],template:function(t,m){t&1&&f(0,it,10,2,"ng-template",null,0,M)},dependencies:[z,L,A,G,Q,U,j,H,N,D,K,J,X,W,Z,Y,V,R,I,E],styles:['@charset "UTF-8";.loading[_ngcontent-%COMP%]{position:relative;background-color:#e0e0e0;overflow:hidden;border-radius:4px}.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-150px;height:100%;width:150px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-150px}to{left:100%}}.edit-modal[_ngcontent-%COMP%]{width:100%;max-width:500px;position:relative;padding:40px 16px}.edit-modal[_ngcontent-%COMP%]   .close-modal[_ngcontent-%COMP%]{position:absolute;top:14px;right:14px;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .edit-modal__title[_ngcontent-%COMP%]{text-align:center}.edit-modal[_ngcontent-%COMP%]   .edit-modal__description[_ngcontent-%COMP%]{margin-bottom:32px}.edit-modal[_ngcontent-%COMP%]   .edit-modal__field[_ngcontent-%COMP%]{width:100%}.edit-modal[_ngcontent-%COMP%]   .edit-modal__checkbox[_ngcontent-%COMP%]{margin-bottom:8px}.edit-modal[_ngcontent-%COMP%]   .edit-modal__btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;flex-wrap:wrap;align-items:center;justify-content:center}.form-loading[_ngcontent-%COMP%]{width:100%;height:30px}']})};export{$ as EditFormModalComponent};
